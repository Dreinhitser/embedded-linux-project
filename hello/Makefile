KERNELDIR ?= $(LINUX_DIR)
CROSS_COMPILE ?= $(TARGET_CROSS)
ARCH ?= $(BR2_ARCH)

obj-m += hello.o

all:
	$(MAKE) ARCH=$(ARCH) CROSS_COMPILE=$(CROSS_COMPILE) -C $(KERNELDIR) M=$(PWD) modules

clean:
	$(MAKE) ARCH=$(ARCH) CROSS_COMPILE=$(CROSS_COMPILE) -C $(KERNELDIR) M=$(PWD) clean